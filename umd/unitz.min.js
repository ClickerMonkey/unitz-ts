!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Unitz",[],e):"object"==typeof exports?exports.Unitz=e():t.Unitz=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t){return new R(t)}function r(t,e,n,i,r,s,u){for(var c=0;c<u.length;c++){var l=u[c],m=l[0],h=l[1],p=l[2],f={};f[m]=o.EITHER,f[h+r]=o.SINGULAR,f[h+s]=o.PLURAL,p&&(f[p]=o.EITHER),t.addGroup({system:a.ANY,unit:m,relativeUnit:e,relativeScale:n,denominators:i,units:f}),e=m}}function s(){E.addClasses(I,L,U,S,A,P,x,G)}Object.defineProperty(e,"__esModule",{value:!0});var o;!function(t){t[t.SINGULAR=0]="SINGULAR",t[t.PLURAL=1]="PLURAL",t[t.EITHER=2]="EITHER"}(o=o||(o={}));var a;!function(t){t[t.METRIC=0]="METRIC",t[t.IMPERIAL=1]="IMPERIAL",t[t.NONE=2]="NONE",t[t.ANY=3]="ANY",t[t.GIVEN=4]="GIVEN"}(a=a||(a={}));var u,c=function(){function t(){}return t.isZero=function(t){return this.abs(t)<this.EPSILON},t.isEqual=function(t,e){return this.abs(t-e)<this.EPSILON},t.isWhole=function(t){return this.abs(Math.floor(t)-t)<this.EPSILON},t.isSingular=function(t){return this.isNumber(t)&&this.abs(this.abs(t)-1)<this.EPSILON},t.isPlural=function(t){return 1!==t&&-1!==t},t.isNumber=function(t){return isFinite(t)},t.trim=function(t){return t?t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):t},t.gcd=function(t,e){if(!this.isWhole(t)||!this.isWhole(e))return 1;var n=t<e?t:e,i=t<e?e:t;for(n=this.abs(n),i=this.abs(i);i;){var r=i;i=n%i,n=r}return n},t.abs=function(t){return t<0?-t:t},t.sign=function(t){return t<0?-1:0===t?0:1},t.appendTo=function(t,e){return e instanceof Array?t.push.apply(t,e):e&&t.push(e),t},t.isGroupDefinition=function(t){return!!(t&&t.system&&t.unit&&t.denominators&&t.units)},t.isValueDefinition=function(t){return!(!t||!(t.value||t.unit||t.num||t.den))},t.isRangeDefinition=function(t){return!!(t&&t.min&&t.max)},t.isArray=function(t){return t instanceof Array},t.isString=function(t){return"string"==typeof t},t.isDefined=function(t){return void 0!==t},t.coalesce=function(t,e){return this.isDefined(t)?t:e},t.EPSILON=1e-5,t}(),l=function(){function t(t,e,n,i,r){var s=c.gcd(e,n);this.value=t,this.num=e/s,this.den=n/s,this.unit=i,this.group=r}return Object.defineProperty(t.prototype,"isValid",{get:function(){return isFinite(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFraction",{get:function(){return 1!==this.den},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecimal",{get:function(){return 1===this.den},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaled",{get:function(){return this.group?this.value*this.group.baseScale:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScaled",{get:function(){return this.group?this.value*this.group.classScale:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actual",{get:function(){return this.num/this.den},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mixedWhole",{get:function(){return 1!==this.den?Math.floor(this.num/this.den):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mixedNum",{get:function(){return 1!==this.den?this.num%this.den:this.num},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floor",{get:function(){return Math.floor(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ceil",{get:function(){return Math.ceil(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"truncate",{get:function(){return this.value<0?this.ceil:this.floor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remainder",{get:function(){return this.value-this.floor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this.actual-this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return c.abs(this.error)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asString",{get:function(){return 1===this.den?this.value+"":0!==this.mixedWhole?this.mixedWhole+t.SEPARATOR_MIXED+this.mixedNum+t.SEPARATOR_FRACTION+this.den:this.num+t.SEPARATOR_FRACTION+this.den},enumerable:!0,configurable:!0}),t.prototype.preferred=function(){return this.group?new t(this.value,this.num,this.den,this.group.preferredUnit,this.group):this},t.prototype.copy=function(){return new t(this.value,this.num,this.den,this.unit,this.group)},t.prototype.zero=function(){return new t(0,0,1,this.unit,this.group)},t.prototype.truncated=function(){return new t(this.truncate,this.truncate,1,this.unit,this.group)},t.prototype.convertTo=function(t){var e=this.group;return e?e.parent.convert(this.value,e,t):this.value},t.prototype.convertToValue=function(e){return t.fromNumberForGroup(this.convertTo(e),e)},t.prototype.conversions=function(t,e,n){var i=this;this.group&&this.group.matches(t,e,function(t,e){n(i.convertToValue(t),e)})},t.prototype.normalize=function(t,e){var n,i;return this.conversions(t,!1,function(t){var r=!e.isNumber(t);if(!r){r="0"!==e.number(t.value)}if(r){var s=e.value(t);(!n||s.length<=i.length)&&(n=t,i=s)}}),n||this},t.prototype.add=function(e,n){void 0===n&&(n=1);var i=this.num*e.den+e.num*this.den*n,r=this.den*e.den;return new t(this.value+e.value*n,i,r,this.unit,this.group)},t.prototype.sub=function(e,n){void 0===n&&(n=1);var i=this.num*e.den-e.num*this.den*n,r=this.den*e.den;return new t(this.value-e.value*n,i,r,this.unit,this.group)},t.prototype.mul=function(e){return new t(this.value*e,this.num*e,this.den,this.unit,this.group)},t.fromNumber=function(e,n,i){return void 0===n&&(n=""),void 0===i&&(i=null),new t(e,e,1,n,i)},t.fromNumberWithRange=function(e,n,i,r,s){void 0===n&&(n=""),void 0===i&&(i=null),void 0===r&&(r=1),void 0===s&&(s=100);for(var o=0,a=-1,u=r;u<=s;u++){var l=u,m=Math.floor(l*e),h=m/l,p=c.abs(e-h);(-1===a||p<a)&&(a=p,o=l)}return a>c.EPSILON?new t(e,e,1,n,i):new t(e,Math.floor(e*o),o,n,i)},t.fromNumberForGroup=function(t,e){return this.fromNumberWithDenominators(t,e.denominators,e.preferredUnit,e)},t.fromNumberWithDenominators=function(e,n,i,r){void 0===i&&(i=""),void 0===r&&(r=null);for(var s=0,o=-1,a=0;a<n.length;a++){var u=n[a],l=Math.floor(u*e),m=l/u,h=c.abs(e-m);(-1===o||h<o)&&(o=h,s=u)}return o>c.EPSILON?new t(e,e,1,i,r):(0===s&&(s=1),new t(e,Math.floor(e*s),s,i,r))},t.fromFraction=function(e,n,i,r){return void 0===i&&(i=""),void 0===r&&(r=null),new t(e/n,e,n,i,r)},t.INVALID=new t(Number.NaN,Number.NaN,1,"",null),t.SEPARATOR_FRACTION="/",t.SEPARATOR_MIXED=" ",t}(),m=function(){function t(t,e){this.min=t.value<e.value?t:e,this.max=e.value>t.value?e:t}return Object.defineProperty(t.prototype,"isValid",{get:function(){return this.min.isValid&&this.max.isValid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFraction",{get:function(){return this.min.isFraction||this.max.isFraction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecimal",{get:function(){return this.min.isDecimal&&this.max.isDecimal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRange",{get:function(){return this.min.value!==this.max.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFixed",{get:function(){return this.min.value===this.max.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"average",{get:function(){return.5*(this.min.value+this.max.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.min.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimum",{get:function(){return this.min.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximum",{get:function(){return this.max.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this.min.group.unit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asString",{get:function(){return this.min.value===this.max.value?this.min.asString:this.min.asString+t.SEPARATOR+this.max.asString},enumerable:!0,configurable:!0}),t.prototype.isMatch=function(t){return this.min.group===t.min.group&&this.max.group===t.max.group},t.prototype.preferred=function(){return new t(this.min.preferred(),this.max.preferred())},t.prototype.positive=function(){var e=this.min.value<0;return this.max.value<0?null:new t(e?this.min.zero():this.min.copy(),this.max.copy())},t.prototype.negative=function(){var e=this.min.value>=0,n=this.max.value>=0;return e?null:new t(this.min.copy(),n?this.max.zero():this.max.copy())},t.prototype.nonzero=function(){var e=0===this.min.value,n=0===this.max.value;return e&&n?null:new t(this.min.copy(),this.max.copy())},t.prototype.maxd=function(){var e=this.max.copy();return new t(e,e)},t.prototype.mind=function(){var e=this.min.copy();return new t(e,e)},t.prototype.normalize=function(e,n){return new t(this.min.normalize(e,n),this.max.normalize(e,n))},t.prototype.add=function(e,n){return void 0===n&&(n=1),new t(this.min.add(e.min,n),this.max.add(e.max,n))},t.prototype.sub=function(e,n){return void 0===n&&(n=1),new t(this.min.sub(e.min,n),this.max.sub(e.max,n))},t.prototype.mul=function(e){return new t(this.min.mul(e),this.max.mul(e))},t.fromFixed=function(e){return new t(e,e)},t.INVALID=new t(l.INVALID,l.INVALID),t.SEPARATOR=" - ",t}(),h=function(){function t(t,e){this.baseScale=1,this.classScale=0,this.dynamic=!1,this.system=t.system,this.common=!!t.common,this.unit=t.unit,this.baseUnit=t.baseUnit,this.preferredUnit=t.preferredUnit||t.unit,this.relativeUnit=t.relativeUnit,this.relativeScale=t.relativeScale||1,this.units=t.units,this.denominators=t.denominators,this.parent=e,this.updateUnits()}return Object.defineProperty(t.prototype,"isBase",{get:function(){return this.unit===this.baseUnit},enumerable:!0,configurable:!0}),t.prototype.setDynamic=function(t){return void 0===t&&(t=!0),this.dynamic=t,this},t.prototype.addUnits=function(t){var e=this.parent;for(var n in t)this.units[n]=t[n],e.addGroupUnit(n,this);return this.updateUnits(),this},t.prototype.removeUnits=function(t){for(var e=this.parent,n=this.units,i=0;i<t.length;i++){var r=t[i];r in n&&(delete n[r],e.removeGroupUnit(r,this))}return this},t.prototype.addDenominator=function(t){return c.appendTo(this.denominators,t),this},t.prototype.setDenominators=function(t){return this.denominators=t,this},t.prototype.setCommon=function(t){return void 0===t&&(t=!0),this.common=t,this},t.prototype.setPreferred=function(t){return this.preferredUnit=t,this},t.prototype.updateUnits=function(){this.singularShort=null,this.singularLong=null,this.pluralShort=null,this.pluralLong=null;for(var t in this.units){var e=this.units[t];e!==o.PLURAL&&((!this.singularShort||t.length<this.singularShort.length)&&(this.singularShort=t),(!this.singularLong||t.length>this.singularLong.length)&&(this.singularLong=t)),e!==o.SINGULAR&&((!this.pluralShort||t.length<this.pluralShort.length)&&(this.pluralShort=t),(!this.pluralLong||t.length>this.pluralLong.length)&&(this.pluralLong=t))}return this},t.prototype.getPluralLong=function(){return this.pluralLong},t.prototype.getPluralShort=function(){return this.pluralShort},t.prototype.getSingularLong=function(){return this.singularLong},t.prototype.getSingularShort=function(){return this.singularShort},t.prototype.matches=function(t,e,n){this.parent&&this.parent.getVisibleGroups(t,e,this,n)},t}(),p=function(){function t(t,e){this.name=t,this.groupMap={},this.groups=[],this.converters={},e&&this.addGroups(e)}return t.prototype.addGroups=function(t){for(var e=0;e<t.length;e++)this.addGroup(t[e]);return this},t.prototype.addGroup=function(t){var e=new h(t,this),n=e.relativeUnit,i=e.relativeScale,r=e.units;if(n){var s=this.groupMap[n];e.baseScale=i*s.baseScale,e.baseUnit=s.baseUnit}for(var o in r)this.addGroupUnit(o,e);return this.groups.push(e),e},t.prototype.addGroupUnit=function(t,e){var n=t.toLowerCase();return this.groupMap[t]=e,this.groupMap[n]=e,this},t.prototype.removeGroupUnit=function(t,e){var n=t.toLowerCase();return this.groupMap[t]===e&&delete this.groupMap[t],this.groupMap[n]===e&&delete this.groupMap[n],this},t.prototype.getFirstBase=function(){for(var t=this.groups,e=0;e<t.length;e++){var n=t[e];if(n.unit===n.baseUnit)return n}return null},t.prototype.setClassScales=function(){var t=this.groups,e=this.getFirstBase();if(e)for(var n=0;n<t.length;n++){var i=t[n];i.baseUnit===e.baseUnit?i.classScale=i.baseScale:i.baseUnit in this.converters&&(i.classScale=this.converters[i.baseUnit][e.baseUnit](i.baseScale))}return this},t.prototype.setBaseConversion=function(t,e,n){var i=this.converters;return i[t]=i[t]||{},i[t][e]=n,this},t.prototype.getVisibleGroups=function(t,e,n,i){for(var r=this.groups,s=0,o=e?r.length-1:0,a=e?-1:r.length,u=e?-1:1,c=o;c!==a;c+=u){var l=r[c];if(t.isVisibleGroup(l,n)){if(!1===i(l,s++))break}}},t.prototype.convert=function(t,e,n){if(e===n||!e||!n)return t;var i=t*e.baseScale;if(e.baseUnit!==n.baseUnit){var r=this.converters[e.baseUnit];if(!r||!r[n.baseUnit])return 0;i=(0,r[n.baseUnit])(i)}return i/n.baseScale},t}();!function(t){t[t.NONE=0]="NONE",t[t.GIVEN=1]="GIVEN",t[t.SHORT=2]="SHORT",t[t.LONG=3]="LONG"}(u=u||(u={}));var f;!function(t){t[t.GIVEN=0]="GIVEN",t[t.NUMBER=1]="NUMBER",t[t.MIXED=2]="MIXED",t[t.FRACTION=3]="FRACTION",t[t.IMPROPER=4]="IMPROPER"}(f=f||(f={}));var d,g=function(){function t(t){this.unit=u.GIVEN,this.format=f.GIVEN,this.repeatUnit=!1,this.unitSpacer="",this.rangeSpacer=" - ",this.fractionSpacer="/",this.mixedSpacer=" ",this.delimiter=", ",this.significant=-1,c.isDefined(t)&&this.set(t)}return t.prototype.set=function(t){return this.unit=c.coalesce(t.unit,this.unit),this.format=c.coalesce(t.format,this.format),this.repeatUnit=c.coalesce(t.repeatUnit,this.repeatUnit),this.unitSpacer=c.coalesce(t.unitSpacer,this.unitSpacer),this.rangeSpacer=c.coalesce(t.rangeSpacer,this.rangeSpacer),this.fractionSpacer=c.coalesce(t.fractionSpacer,this.fractionSpacer),this.mixedSpacer=c.coalesce(t.mixedSpacer,this.mixedSpacer),this.delimiter=c.coalesce(t.delimiter,this.delimiter),this.significant=c.coalesce(t.significant,this.significant),this},t.prototype.extend=function(e){var n=this;return c.isDefined(e)&&(e instanceof t?n=e:(n=new t(this),n.set(e))),n},t.prototype.ranges=function(t){for(var e="",n=0;n<t.length;n++){var i=t[n];i.isValid&&(e.length&&(e+=this.delimiter),e+=this.range(i))}return e},t.prototype.range=function(t){var e="";if(t.isValid)if(t.isFixed)e+=this.value(t.min);else{var n=this.repeatUnit||t.min.unit!==t.max.unit;e+=this.value(t.min,n),e+=this.rangeSpacer,e+=this.value(t.max)}else;return e},t.prototype.value=function(t,e){void 0===e&&(e=!0);var n="";if(t.isValid&&(this.isFraction(t)?this.isMixed(t)?(n+=t.mixedWhole,n+=this.mixedSpacer,n+=t.mixedNum,n+=this.fractionSpacer,n+=t.den):(n+=t.num,n+=this.fractionSpacer,n+=t.den):n+=this.number(t.value)),t.isValid&&this.unit!==u.NONE&&e){var i=t.group;n+=this.unitSpacer,this.isLongUnit(t)?n+=c.isSingular(t.value)?i.getSingularLong():i.getPluralLong():this.isShortUnit(t)||i&&i.dynamic?n+=c.isSingular(t.value)?i.getSingularShort():i.getPluralShort():n+=t.unit}return n},t.prototype.number=function(t){var e=t+"";if(this.significant>=0){var n=t.toFixed(this.significant).replace(/0*$/,"").replace(/\.$/,"");return n.length<e.length?n:e}return e},t.prototype.isFraction=function(t){return t.isFraction&&this.format!==f.NUMBER},t.prototype.isNumber=function(t){return t.isValid&&!this.isFraction(t)},t.prototype.isMixed=function(t){return 0!==t.mixedWhole&&this.format!==f.IMPROPER},t.prototype.isShortUnit=function(t){return t.group&&this.unit===u.SHORT},t.prototype.isLongUnit=function(t){return t.group&&this.unit===u.LONG},t}(),v=function(){function t(t){this.common=!0,this.system=a.GIVEN,this.min=-Number.MAX_VALUE,this.max=Number.MAX_VALUE,this.convertWithMax=!0,this.groupless=!0,c.isDefined(t)&&this.set(t)}return t.prototype.set=function(t){return this.common=c.coalesce(t.common,this.common),this.system=c.coalesce(t.system,this.system),this.min=c.coalesce(t.min,this.min),this.max=c.coalesce(t.max,this.max),this.groupless=c.coalesce(t.groupless,this.groupless),this.convertWithMax=c.coalesce(t.convertWithMax,this.convertWithMax),this.onlyUnits=c.coalesce(t.onlyUnits,this.onlyUnits),this.notUnits=c.coalesce(t.notUnits,this.notUnits),this.onlyClasses=c.coalesce(t.onlyClasses,this.onlyClasses),this.notClasses=c.coalesce(t.notClasses,this.notClasses),this},t.prototype.extend=function(e){var n=this;return c.isDefined(e)&&(e instanceof t?n=e:(n=new t(this),n.set(e))),n},t.prototype.isVisibleGroup=function(t,e){return this.isCommonMatch(t)&&this.isSystemMatch(t,e)&&this.isUnitMatch(t)&&this.isClassMatch(t.parent)},t.prototype.isCommonMatch=function(t){return!this.common||t.common},t.prototype.isSystemMatch=function(t,e){switch(this.system){case a.METRIC:return t.system===a.METRIC||t.system===a.ANY;case a.IMPERIAL:return t.system===a.IMPERIAL||t.system===a.ANY;case a.NONE:return!1;case a.ANY:return!0;case a.GIVEN:return!e||t.baseUnit===e.baseUnit}return!1},t.prototype.isClassMatch=function(t){return this.onlyClasses?-1!==this.onlyClasses.indexOf(t.name):!this.notClasses||-1===this.notClasses.indexOf(t.name)},t.prototype.isUnitMatch=function(t){return this.onlyUnits?-1!==this.onlyUnits.indexOf(t.unit):!this.notUnits||-1===this.notUnits.indexOf(t.unit)},t}();!function(t){t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t[t.AVERAGE=2]="AVERAGE"}(d=d||(d={}));var y=function(){function t(t){this.ascending=!1,this.type=d.MAX,this.classes={},c.isDefined(t)&&this.set(t)}return t.prototype.set=function(t){if(this.ascending=c.coalesce(t.ascending,this.ascending),this.type=c.coalesce(t.type,this.type),c.isDefined(t.classes))for(var e in t.classes)this.classes[e]=t.classes[e];return this},t.prototype.extend=function(e){var n=this;return c.isDefined(e)&&(e instanceof t?n=e:(n=new t(this),n.set(e))),n},t.prototype.getSorter=function(){var t=this;return function(e,n){var i=t.getClassComparison(e,n);if(0===i)switch(t.type){case d.MIN:i=t.getMinComparison(e,n);break;case d.MAX:i=t.getMaxComparison(e,n);break;case d.AVERAGE:i=t.getAverageComparison(e,n)}return t.ascending?i:-i}},t.prototype.getMinComparison=function(t,e){return c.sign(t.min.classScaled-e.min.classScaled)},t.prototype.getMaxComparison=function(t,e){return c.sign(t.max.classScaled-e.max.classScaled)},t.prototype.getAverageComparison=function(t,e){var n=.5*(t.min.classScaled+t.max.classScaled),i=.5*(e.min.classScaled+e.max.classScaled);return c.sign(n-i)},t.prototype.getClassComparison=function(t,e){var n=t.min.group?1:-1,i=e.min.group?1:-1;return n!==i?n-i:(this.classes[t.min.group.parent.name]||0)-(this.classes[e.min.group.parent.name]||0)},t}(),E=function(){function t(){}return t.getGroup=function(e){if(!e)return null;var n=t.unitToGroup[e];if(n)return n;var i=e.toLowerCase(),r=t.unitToGroup[i];if(r)return r;var s=t.getDynamicMatch(e),o=t.dynamicMatches[s];return o?t.addDynamicUnit(e,o):t.newDynamicGroup(e)},t.addClass=function(t){this.classMap[t.name]=t,this.classes.push(t);var e=t.groupMap;for(var n in e)this.unitToGroup[n]=e[n]},t.addClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)this.addClass(t[n])},t.addDynamicUnit=function(t,e){e.units[t]=o.EITHER;var n=0;for(var i in e.units)i&&n++;if(n>1){var r=void 0;for(var i in e.units)e.units[i]=o.SINGULAR,(!r||i.length>r.length)&&(r=i);r&&(e.units[r]=o.PLURAL)}return e.updateUnits(),this.unitToGroup[t]=e,this.unitToGroup[t.toLowerCase()]=e,this.dynamicMatches[this.getDynamicMatch(t)]=e,e},t.newDynamicGroup=function(t){var e=new p(t),n=e.addGroup({system:a.ANY,unit:t,common:!0,baseUnit:t,denominators:[2,3,4,5,6,8,10],units:{}});return n.setDynamic(),this.addDynamicUnit(t,n),this.dynamicGroups.push(n),n},t.getDynamicMatch=function(t){return t.substring(0,this.dynamicMatchLength).toLowerCase()},t.classMap={},t.classes=[],t.unitToGroup={},t.dynamicGroups=[],t.dynamicMatches={},t.dynamicMatchLength=3,t.globalOutput=new g,t.globalTransform=new v,t.globalSort=new y,t}(),R=function(){function t(t,e){this.input=t,this.ranges=e||b.ranges(t,E.getGroup)}return t.prototype.scale=function(t){return this.mutate(function(e){return e.mul(t)})},t.prototype.scaleTo=function(t){return this.scale(this.getScaleTo(t))},t.prototype.preferred=function(){return this.mutate(function(t){return t.preferred()})},t.prototype.positive=function(){return this.mutate(function(t){return t.positive()})},t.prototype.negative=function(){return this.mutate(function(t){return t.negative()})},t.prototype.nonzero=function(){return this.mutate(function(t){return t.nonzero()})},t.prototype.max=function(){return this.hasRanges?this.mutate(function(t){return t.maxd()}):this},t.prototype.min=function(){return this.hasRanges?this.mutate(function(t){return t.mind()}):this},t.prototype.normalize=function(t,e){var n=E.globalOutput.extend(e),i=E.globalTransform.extend(t);return this.mutate(function(t){return t.normalize(i,n)})},t.prototype.compact=function(e){var n=[],i=E.globalTransform.extend(e),r=this.groupByClass(),s=r.classes,o=r.groupless;for(var a in s)!function(t){var e=s[t],r=e.ranges,o=e.parent,a=null,u=null,c=0,h=0;if(!i.isClassMatch(o))return"continue";if(o.getVisibleGroups(i,!1,null,function(t){return a=u=t,!1}),!a)return"continue";for(var p=0;p<r.length;p++){var f=r[p],d=f.min.group,g=f.max.group;d.classScale>a.classScale&&i.isVisibleGroup(d)&&(c=o.convert(c,a,d),a=d),g.classScale>u.classScale&&i.isVisibleGroup(g)&&(h=o.convert(h,u,g),u=g),c+=f.min.convertTo(a),h+=f.max.convertTo(u)}var v=l.fromNumberForGroup(c,a),y=l.fromNumberForGroup(h,u);n.push(new m(v,y))}(a);if(i.groupless&&o.length){for(var u=new l(0,0,1,"",null),c=new l(0,0,1,"",null),h=0;h<o.length;h++)u=u.add(o[h].min),c=c.add(o[h].max);n.push(new m(u,c))}return new t(this.input,n)},t.prototype.expand=function(e){for(var n=E.globalTransform.extend(e),i=this.compact(n),r=i.ranges,s=[],o=0;o<r.length;o++)!function(t){var e=r[t],i=n.convertWithMax?e.max:e.min,o=i.group;o?o.matches(n,!0,function(t){if(!c.isZero(i.value)){var e=i.convertToValue(t);if(t.isBase)s.push(m.fromFixed(e));else if(c.abs(e.value)>=1){var n=e.truncated(),r=t.baseScale/o.baseScale;i=i.sub(n,r),s.push(m.fromFixed(n))}}}):s.push(e)}(o);return new t(this.input,s)},t.prototype.add=function(t,e){return void 0===e&&(e=1),this.operate(t,function(t,n){return t.add(n,e)})},t.prototype.sub=function(t,e){return void 0===e&&(e=1),this.operate(t,function(t,n){return t.sub(n,e)})},t.prototype.operate=function(e,n){for(var i=this.ranges,r=[],s=b.base(e),o=s.ranges,a=[],u=0;u<i.length;u++){for(var c=i[u],l=0;l<o.length;l++)if(!a[l]){var m=o[l];c.isMatch(m)&&(c=n(c,m),a[l]=!0)}r.push(c)}for(var l=0;l<o.length;l++)a[l]||r.push(o[l]);return new t(this.input,r)},t.prototype.conversions=function(e){for(var n=E.globalTransform.extend(e),i=this.compact(e),r=i.ranges,s=[],o=0;o<r.length;o++)!function(t){var e=r[t];(n.convertWithMax?e.max:e.min).conversions(n,!1,function(t){var i=n.convertWithMax?e.min.convertToValue(t.group):t,r=n.convertWithMax?t:e.max.convertToValue(t.group);i.value<=n.max&&r.value>=n.min&&s.push(new m(i,r))})}(o);return new t(this.input,s)},t.prototype.mutate=function(e){for(var n=[],i=this.ranges,r=0;r<i.length;r++){var s=e(i[r]);s&&n.push(s)}return new t(this.input,n)},t.prototype.filter=function(e){for(var n=E.globalTransform.extend(e),i=this.ranges,r=[],s=0;s<i.length;s++){var o=i[s],a=n.convertWithMax?o.max.group:o.min.group;(a&&n.isVisibleGroup(a)||!a&&n.groupless)&&r.push(o)}return new t(this.input,r)},t.prototype.sort=function(e){var n=E.globalSort.extend(e),i=this.ranges.slice();return i.sort(n.getSorter()),new t(this.input,i)},t.prototype.groupByClass=function(){for(var t=this.ranges,e={},n=[],i=0;i<t.length;i++){var r=t[i];if(r.min.group){var s=r.min.group.parent,o=e[s.name];o||(o=e[s.name]={parent:s,ranges:[]}),o.ranges.push(r)}else n.push(r)}return{classes:e,groupless:n}},t.prototype.getScaleTo=function(t){var e=b.value(t,E.getGroup),n=this.convert(e.unit);return e.value/n.average},t.prototype.output=function(t){return E.globalOutput.extend(t).ranges(this.ranges)},t.prototype.convert=function(t){var e=E.getGroup(t);if(!e)return null;for(var n=e.parent,i=this.ranges,r=new l(0,0,1,t,e),s=new l(0,0,1,t,e),o=0;o<i.length;o++){var a=i[o],u=a.min.group;u&&u.parent===n&&(r=r.add(a.min.convertToValue(e)),s=s.add(a.max.convertToValue(e)))}return new m(r,s)},t.prototype.classes=function(){for(var t=this.ranges,e={},n=[],i=0;i<t.length;i++){var r=t[i],s=r.min.group;s&&(e[s.parent.name]=s.parent)}for(var o in e)n.push(e[o]);return n},Object.defineProperty(t.prototype,"hasRanges",{get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].isRange)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(!t[e].isValid)return!1;return!0},enumerable:!0,configurable:!0}),t}(),b=function(){function t(){}return t.base=function(t){return t instanceof R?t:new R(t)},t.ranges=function(t,e){return c.isArray(t)?this.rangesFromArray(t,e):c.isString(t)?this.rangesFromString(t,e):c.isRangeDefinition(t)?this.rangesFromArray([t],e):c.isValueDefinition(t)?this.rangesFromArray([t],e):[]},t.rangesFromArray=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.range(t[i],e);n.push(r)}return n},t.rangesFromString=function(t,e){var n=t.split(this.REGEX_LIST);return this.rangesFromArray(n,e)},t.range=function(t,e){if(c.isString(t))return this.rangeFromString(t,e);if(c.isRangeDefinition(t)){var n=t,i=this.value(n.min,e),r=this.value(n.max,e);return new m(i,r)}return m.INVALID},t.rangeFromString=function(t,e){var n=this.REGEX_RANGE.exec(t);if(!n){var i=this.valueFromString(t,e);return new m(i,i)}var r=n[1],s=n[2],o=this.input(r),a=this.input(s);if(!o||!a)return m.INVALID;var u=o.unit||a.unit,c=a.unit||o.unit,l=this.valueFromResult(o,u,e),h=this.valueFromResult(a,c,e);return new m(l,h)},t.value=function(t,e){return c.isString(t)?this.valueFromString(t,e):c.isValueDefinition(t)?this.valueFromValue(t,e):l.INVALID},t.valueFromValue=function(t,e){var n=c.isDefined(t.value)?t.value:1,i=c.isDefined(t.num)?t.num:n,r=c.isDefined(t.den)?t.den:1,s=c.isDefined(t.value)?t.value:i/r,o=t.unit||"",a=e(o);return new l(s,i,r,o,a)},t.valueFromString=function(t,e){var n=this.input(t);return n?this.valueFromResult(n,n.unit,e):l.INVALID},t.valueFromResult=function(t,e,n){var i=n(e);return new l(t.value,t.valueNum,t.valueDen,e,i)},t.input=function(t){var e=this.REGEX_PARSE.exec(t),n=parseInt(e[1]),i=isFinite(n),r="-"===e[1].charAt(0)?-1:1,s=parseInt(e[3]),o=parseInt(e[5]),a=e[6],u=isFinite(parseFloat(a)),l=c.trim(e[7]);if(!i&&u&&(n=0,i=!0),!i&&!l)return null;var m=1,h=1,p=1;if(i){if(m=n,p=n,isFinite(o))h=o,isFinite(s)?(m+=s/o*r,p*=o,p+=s):m/=o;else if(u){var f=parseFloat("0."+a);m+=f*r,p+=f}p*=r}return{value:m,valueNum:p,valueDen:h,num:s,den:o,unit:l}},t.REGEX_LIST=/\s*,\s*/,t.REGEX_RANGE=/\s*(-?[^-]+)-(.+)/,t.REGEX_PARSE=/^\s*(-?\d*)(\s+(\d+))?(\s*\/\s*(\d+)|\.(\d+)|)\s*(.*)\s*$/i,t}(),I=new p("Weight").setBaseConversion("mg","oz",function(t){return 35274e-9*t}).setBaseConversion("oz","mg",function(t){return 28349.5*t}).addGroups([{system:a.METRIC,common:!0,unit:"mg",baseUnit:"mg",denominators:[2,10],units:{mg:o.EITHER,milligram:o.SINGULAR,milligrams:o.PLURAL}},{system:a.METRIC,common:!0,unit:"g",relativeUnit:"mg",relativeScale:1e3,denominators:[2,10,1e3],units:{g:o.EITHER,gram:o.SINGULAR,grams:o.PLURAL}},{system:a.METRIC,common:!0,unit:"kg",relativeUnit:"g",relativeScale:1e3,denominators:[2,10,1e3],units:{kg:o.EITHER,kilogram:o.SINGULAR,kilograms:o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"oz",baseUnit:"oz",denominators:[2,3,4,16],units:{oz:o.EITHER,ounce:o.SINGULAR,ounces:o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"lb",relativeUnit:"oz",relativeScale:16,denominators:[2,3,4,16],units:{lb:o.EITHER,lbs:o.PLURAL,pound:o.SINGULAR,pounds:o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"ton",relativeUnit:"lb",relativeScale:2e3,denominators:[2,3,4,10],units:{ton:o.EITHER,tons:o.PLURAL,tonnes:o.PLURAL}}]).setClassScales(),L=new p("Area").setBaseConversion("sqin","sqmm",function(t){return 645.16*t}).setBaseConversion("sqmm","sqin",function(t){return.00155*t}).addGroups([{system:a.IMPERIAL,common:!0,unit:"sqin",baseUnit:"sqin",denominators:[2,4,8,16],units:{sqin:o.EITHER,"sq. in.":o.EITHER,"sq in":o.EITHER,in2:o.EITHER,"in^2":o.EITHER,"in²":o.EITHER,"square inch":o.SINGULAR,"square inches":o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"sqft",relativeUnit:"sqin",relativeScale:144,denominators:[2,4,8,16],units:{sqft:o.EITHER,"sq. ft.":o.EITHER,"sq ft":o.EITHER,ft2:o.EITHER,"ft^2":o.EITHER,"ft²":o.EITHER,"square foot":o.SINGULAR,"square feet":o.PLURAL}},{system:a.IMPERIAL,unit:"sqyd",relativeUnit:"sqft",relativeScale:9,denominators:[2,3,4,8,9,16],units:{sqyd:o.EITHER,"sq. yd.":o.EITHER,"sq yd":o.EITHER,yd2:o.EITHER,"yd^2":o.EITHER,"yd²":o.EITHER,"square yard":o.SINGULAR,"square yards":o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"acre",relativeUnit:"sqyd",relativeScale:4840,denominators:[2,3,4,8,10],units:{acre:o.EITHER,acres:o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"sqmi",relativeUnit:"acre",relativeScale:640,denominators:[2,3,4,8,10],units:{sqmi:o.EITHER,"sq. mi.":o.EITHER,"sq mi":o.EITHER,mi2:o.EITHER,"mi^2":o.EITHER,"mi²":o.EITHER,"square mile":o.SINGULAR,"square miles":o.PLURAL}},{system:a.METRIC,common:!0,unit:"sqmm",baseUnit:"sqmm",denominators:[2,4,8,16],units:{sqmm:o.EITHER,"sq. mm.":o.EITHER,"sq mm":o.EITHER,mm2:o.EITHER,"mm^2":o.EITHER,"mm²":o.EITHER,"square millimeter":o.SINGULAR,"square millimeters":o.PLURAL}},{system:a.METRIC,common:!0,unit:"sqcm",relativeUnit:"sqmm",relativeScale:100,denominators:[2,4,8,16],units:{sqcm:o.EITHER,"sq. cm.":o.EITHER,"sq cm":o.EITHER,cm2:o.EITHER,"cm^2":o.EITHER,"cm²":o.EITHER,"square centimeter":o.SINGULAR,"square centimeters":o.PLURAL}},{system:a.METRIC,common:!0,unit:"sqm",relativeUnit:"sqcm",relativeScale:1e4,denominators:[2,4,8,16],units:{sqm:o.EITHER,"sq. m.":o.EITHER,"sq m":o.EITHER,m2:o.EITHER,"m^2":o.EITHER,"m²":o.EITHER,"square meter":o.SINGULAR,"square meters":o.PLURAL}},{system:a.METRIC,common:!0,unit:"sqkm",relativeUnit:"sqm",relativeScale:1e6,denominators:[2,4,8,16],units:{sqkm:o.EITHER,"sq. km.":o.EITHER,"sq km":o.EITHER,km2:o.EITHER,"km^2":o.EITHER,"km²":o.EITHER,"square kilometer":o.SINGULAR,"square kilometers":o.PLURAL}}]).setClassScales(),U=new p("Time").addGroups([{system:a.ANY,unit:"ns",baseUnit:"ns",denominators:[10,100],units:{ns:o.EITHER,nanosecond:o.SINGULAR,nanoseconds:o.PLURAL,nano:o.SINGULAR,nanos:o.PLURAL}},{system:a.ANY,unit:"us",relativeUnit:"ns",relativeScale:1e3,denominators:[10,100,1e3],units:{us:o.EITHER,microsecond:o.SINGULAR,microseconds:o.PLURAL,micro:o.SINGULAR,micros:o.PLURAL}},{system:a.ANY,common:!0,unit:"ms",relativeUnit:"us",relativeScale:1e3,denominators:[10,100,1e3],units:{ms:o.EITHER,millisecond:o.SINGULAR,milliseconds:o.PLURAL,milli:o.SINGULAR,millis:o.PLURAL}},{system:a.ANY,common:!0,unit:"s",relativeUnit:"ms",relativeScale:1e3,denominators:[10,100,1e3],units:{s:o.EITHER,second:o.SINGULAR,seconds:o.PLURAL,sec:o.SINGULAR,secs:o.PLURAL}},{system:a.ANY,common:!0,unit:"min",relativeUnit:"s",relativeScale:60,denominators:[2,3,4,60],units:{min:o.EITHER,minute:o.SINGULAR,minutes:o.PLURAL,mins:o.PLURAL}},{system:a.ANY,common:!0,unit:"hr",relativeUnit:"min",relativeScale:60,denominators:[2,3,4,60],units:{hr:o.EITHER,hour:o.SINGULAR,hours:o.PLURAL,hrs:o.PLURAL}},{system:a.ANY,common:!0,unit:"day",relativeUnit:"hr",relativeScale:24,denominators:[2,3,4,6,24],units:{day:o.EITHER,days:o.PLURAL}},{system:a.ANY,common:!0,unit:"wk",relativeUnit:"day",relativeScale:7,denominators:[7],units:{wk:o.EITHER,week:o.SINGULAR,weeks:o.PLURAL,wks:o.PLURAL}},{system:a.ANY,common:!0,unit:"yr",relativeUnit:"day",relativeScale:365.2425,denominators:[2,3,4,6,12,52],units:{yr:o.EITHER,year:o.SINGULAR,years:o.PLURAL,yrs:o.PLURAL}},{system:a.ANY,common:!0,unit:"score",relativeUnit:"yr",relativeScale:20,denominators:[20],units:{score:o.EITHER}}]).setClassScales(),S=new p("Digital").addGroups([{system:a.ANY,common:!0,unit:"b",baseUnit:"b",denominators:[],units:{b:o.EITHER,bit:o.SINGULAR,bits:o.PLURAL}},{system:a.ANY,unit:"nibble",relativeUnit:"b",relativeScale:4,denominators:[],units:{nibble:o.EITHER,nibbles:o.PLURAL,nybble:o.EITHER,nyble:o.EITHER,"half-byte":o.EITHER,"half byte":o.EITHER,tetrade:o.EITHER,"semi-octet":o.EITHER,quadbit:o.EITHER,quartet:o.EITHER}},{system:a.ANY,unit:"B",relativeUnit:"b",relativeScale:8,denominators:[2,8],units:{B:o.EITHER,byte:o.SINGULAR,bytes:o.PLURAL}}]);r(S,"B",1e3,[2,4,5,10],"byte","bytes",[["kB","kilo"],["mB","mega"],["gB","giga"],["tB","tera"],["pB","peta"],["eB","exa"],["zB","zetta"],["yB","yotta"]]),r(S,"B",1024,[2,4,8,16],"byte","bytes",[["KB","kibi"],["MB","mebi"],["GB","gibi"],["TB","tebi"],["PB","pebi"],["EB","exbi"],["ZB","zebi"],["YB","yobi"]]),r(S,"b",1e3,[2,4,5,10],"bit","bits",[["kb","kilo","kbit"],["mb","mega","mbit"],["gb","giga","gbit"],["tb","tera","tbit"],["pb","peta","pbit"],["eb","exa","ebit"],["zb","zetta","zbit"],["yb","yotta","ybit"]]),r(S,"b",1024,[2,4,8,16],"bit","bits",[["kibit","kibi"],["mibit","mebi"],["gibit","gibi"],["tibit","tebi"],["pibit","pebi"],["eibit","exbi"],["zibit","zebi"],["yibit","yobi"]]),S.setClassScales();var A=new p("Temperature").setBaseConversion("F","°C",function(t){return 5*(t-32)/9}).setBaseConversion("°C","F",function(t){return 9*t/5+32}).setBaseConversion("K","°C",function(t){return t-273.15}).setBaseConversion("K","F",function(t){return 9*t/5-459.67}).setBaseConversion("°C","K",function(t){return t+273.15}).setBaseConversion("F","K",function(t){return 5*(t+459.67)/9}).addGroups([{system:a.IMPERIAL,common:!0,unit:"F",baseUnit:"F",denominators:[],units:{F:o.EITHER,"°F":o.EITHER,Fahrenheit:o.EITHER}},{system:a.METRIC,common:!0,unit:"°C",baseUnit:"°C",denominators:[],units:{"°C":o.EITHER,Celsius:o.EITHER}},{system:a.METRIC,unit:"K",baseUnit:"K",denominators:[],units:{K:o.EITHER,kelvin:o.EITHER,kelvins:o.EITHER}}]).setClassScales(),T=180/Math.PI,N=Math.PI/180,P=new p("Rotation").setBaseConversion("deg","rad",function(t){return t*T}).setBaseConversion("rad","deg",function(t){return t*N}).addGroups([{system:a.ANY,common:!0,unit:"deg",baseUnit:"deg",denominators:[],units:{deg:o.EITHER,"°":o.EITHER,degrees:o.PLURAL,degree:o.SINGULAR}},{system:a.ANY,common:!0,unit:"rad",baseUnit:"rad",denominators:[],units:{rad:o.EITHER,radians:o.PLURAL,radian:o.SINGULAR}}]).setClassScales();a.METRIC,o.SINGULAR;var x=new p("Volume").setBaseConversion("deg","rad",function(t){return 1*t}).setBaseConversion("rad","deg",function(t){return 2*t}).addGroups([]).setClassScales(),G=new p("Length").setBaseConversion("in","mm",function(t){return 25.4*t}).setBaseConversion("mm","in",function(t){return.03937*t}).addGroups([{system:a.IMPERIAL,common:!0,unit:"in",baseUnit:"in",denominators:[2,4,8,16,32],units:{in:o.EITHER,inch:o.SINGULAR,inches:o.PLURAL,'"':o.EITHER}},{system:a.IMPERIAL,common:!0,unit:"ft",relativeUnit:"in",relativeScale:12,denominators:[2],units:{ft:o.EITHER,foot:o.SINGULAR,feet:o.PLURAL,"'":o.EITHER}},{system:a.IMPERIAL,unit:"yd",relativeUnit:"ft",relativeScale:3,denominators:[],units:{yd:o.EITHER,yard:o.SINGULAR,yards:o.PLURAL,yds:o.PLURAL}},{system:a.IMPERIAL,common:!0,unit:"mi",relativeUnit:"ft",relativeScale:5280,denominators:[2,3,4,10],units:{mi:o.EITHER,mile:o.SINGULAR,miles:o.PLURAL}},{system:a.IMPERIAL,unit:"league",relativeUnit:"mi",relativeScale:3,denominators:[2,3,4,5,6,7,8,9,10],units:{league:o.EITHER,leagues:o.PLURAL}},{system:a.METRIC,common:!0,unit:"mm",baseUnit:"mm",denominators:[10],units:{mm:o.EITHER,millimeter:o.SINGULAR,millimeters:o.PLURAL}},{system:a.METRIC,common:!0,unit:"cm",relativeUnit:"mm",relativeScale:10,denominators:[2,4,10],units:{cm:o.EITHER,centimeter:o.SINGULAR,centimeters:o.PLURAL}},{system:a.METRIC,unit:"dc",relativeUnit:"cm",relativeScale:10,denominators:[10],units:{dc:o.EITHER,decimeter:o.SINGULAR,decimeters:o.PLURAL}},{system:a.METRIC,common:!0,unit:"m",relativeUnit:"cm",relativeScale:100,denominators:[2,3,4,5,10],units:{m:o.EITHER,meter:o.SINGULAR,meters:o.PLURAL}},{system:a.METRIC,common:!0,unit:"km",relativeUnit:"m",relativeScale:1e3,denominators:[2,3,4,5,6,7,8,9,10],units:{km:o.EITHER,kilometer:o.SINGULAR,kilometers:o.PLURAL}}]).setClassScales();n.d(e,"Plurality",function(){return o}),n.d(e,"System",function(){return a}),n.d(e,"Functions",function(){return c}),n.d(e,"Parse",function(){return b}),n.d(e,"OutputUnit",function(){return u}),n.d(e,"OutputFormat",function(){return f}),n.d(e,"Output",function(){return g}),n.d(e,"Transform",function(){return v}),n.d(e,"SortType",function(){return d}),n.d(e,"Sort",function(){return y}),n.d(e,"Core",function(){return E}),n.d(e,"Group",function(){return h}),n.d(e,"Class",function(){return p}),n.d(e,"Value",function(){return l}),n.d(e,"Range",function(){return m}),n.d(e,"uz",function(){return i}),n.d(e,"Base",function(){return R}),n.d(e,"addDefaults",function(){return s})}])});
//# sourceMappingURL=unitz.min.js.map